### 设计模式的目的

降低耦合性，提高内聚性、灵活性、稳定性、可维护性。



### 设计模式的七大原则

1. 单一职责原则
2. 接口隔离原则
3. 依赖倒转（倒置）原则
4. 里氏替换原则
5. 开闭原则
6. 迪米特法则
7. 合成复用原则



#### 1、单一职责原则

​	降低类的复杂度，**一个类只负责一项职责**（如userDao只负责user相关的业务）

​	提高类的可读性，可维护性

​	降低变更引起的风险

​	当逻辑足够简单时，才可以在代码级违反单一职责原则，只有类中方法数量足够少时，可以在方法级别保持单一职责原则



#### 2、接口隔离原则（Interface Segregation Principle）

基本介绍

​	客户端不应该依赖它不需要的接口，即一个类对另一个类的依赖（使用）应该建立在**最小的接口**上



#### 3、依赖倒转原则（Dependence Inversion Principle）

基本介绍

1. 高层模块不应该依赖低层模块，二者都应该依赖其抽象
2. **抽象不应该依赖细节，细节应该依赖抽象**
3. 依赖倒转（倒置）的**中心思想时面向接口编程**
4. 依赖倒置原则是基于这样的设计理念：相对于有细节的多变性，抽象的东西要稳定得多。以抽象为基础搭建的架构比以细节为基础的架构要**稳定**的多。在java中，抽象指的是接口或抽象类，细节就是具体的实现类
5. 使用**接口或抽象类的目的是制定好规范**（设计），而不涉及具体的操作，把展现细节的任务交给它们的实现类去完成

依赖关系传递的三种方式

1. 接口传递
2. 构造方法传递
3. setter方法传递

依赖倒转原则的注意事项和细节

1. 低层模块尽量都要有抽象类或接口，使程序的稳定性更好
2. 变量的声明类型尽量是抽象类或接口，这样我们的变量引用和实际对象间，就存在一个缓冲层，利于程序扩展和优化
3. 继承时遵循里氏替换原则



#### 4、里氏替换原则（Liskov Substitution Principle）

在**使用继承时**，遵循里氏替换原则，在子类**中尽量不要重写父类的方法**

继承带来的问题

1. 增加了程序的耦合性
2. 使用继承会对程序带来**侵入性**，程序的**可移植性降低**，当父类需要修改时，必须考虑到其子类，并且父类修改后，子类的功能可能产生故障
3. 子类重写父类已经实现的的方法，会破坏原有的功能

基本介绍

1. 所有引用基类的地方必须能透明地使用其子类的对象
2. 在**使用继承时**，遵循里氏替换原则，在子类**中尽量不要重写父类的方法**
3. 里氏替换原则告诉我们，继承让两个类耦合性增强了，在适当的情况下，可以**通过聚合，组合，依赖来解决问题**

#### 5、开闭原则（Open Closed Principle）

基本介绍

1. 开闭原则时编程中**最基础，最重要**的设计原则
2. 一个软件实体如类，模块和函数应该**对扩展开放**（对提供方），对修改关闭（对使用方）。用抽象构建框架，用实现扩展细节
3. 当软件需要变化时，尽量**通过扩展**软件实体的行为来实现变化，而不是通过修改已有代码来实现变化。
4. 编程中遵守其他原则，以及使**用设计模式的目的**就是遵守开闭原则。

#### 6、迪米特法则（Demeter Principle）

也叫**最小知道原则**，

核心
	陌生的类(没有在成员变量、方法参数、方法放回值出现的类)不以局部变量的形式出现在类的内部

简单介绍

1. 一个对象应该对其他对象保持最少的了解
2. 类与类关系越密切，耦合度越大

细节

1. 迪米特法则的核心时降低类之间的耦合
2. 只是要求降低类间（对象间）耦合关系，并不是要求完全没有依赖关系



#### 7、合成复用原则（Composite Reuse Principle）

​	尽量使用合成/聚合的方式，而不是使用继承



### 设计原则的核心思想

1. 把代码中需要变化和不需要变化的分开，找到应用中需要变化的地方，把他们独立出来
2. 针对接口编程，而不是针对实现编程
3. 尽量使用组合，而不是继承
4. 松耦合





### 类之间的关系

依赖关系（dependence）

​	类中使用到了别的类

1. 类的成员属性
2. 类的方法参数类型
3. 类的方法返回类型
4. 类的方法中使用到了别的类

类图表示：虚线箭头



#### 泛化关系（generalization）

​	泛化关系就是继承关系，是依赖关系的特例

类图表示：实线空心三角



#### 实现关系（implementation）

​	实现关系就是通过implements实现其他类，是依赖关系的特例

类图表示：虚线空心三角



#### 关联关系（association）

​	类与类之间的联系（成员变量），是依赖关系的特例。

​	具有导向型，有单向的，双向的

类图表示：实线



#### 聚合关系（aggregation）

​	表示整体和部分的关系（成员变量），整体和部分可以分开。聚合关系是关联关系的特例。

类图表示：空心菱形



#### 组合关系（Composition）

​	整体和部分的关系（成员变量），但是整体和部分不可以分开。

类图关系：实心菱形

